<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CPU Usage Analyzer: /home/kaliuser/Documents/portfolio/cpuusageanalizer/reader_cpuanalyzer.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CPU Usage Analyzer<span id="projectnumber">&#160;v1.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">/home/kaliuser/Documents/portfolio/cpuusageanalizer/reader_cpuanalyzer.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;reader_cpuanalyzer.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for reader_cpuanalyzer.c:</div>
<div class="dyncontent">
<div class="center"><img src="reader__cpuanalyzer_8c__incl.png" border="0" usemap="#a_2home_2kaliuser_2Documents_2portfolio_2cpuusageanalizer_2reader__cpuanalyzer_8c" alt=""/></div>
<map name="a_2home_2kaliuser_2Documents_2portfolio_2cpuusageanalizer_2reader__cpuanalyzer_8c" id="a_2home_2kaliuser_2Documents_2portfolio_2cpuusageanalizer_2reader__cpuanalyzer_8c">
<area shape="rect" title=" " alt="" coords="574,5,773,61"/>
<area shape="rect" href="reader__cpuanalyzer_8h_source.html" title=" " alt="" coords="593,109,754,136"/>
<area shape="rect" href="cpuanalyzer_8h_source.html" title=" " alt="" coords="617,184,729,211"/>
<area shape="rect" title=" " alt="" coords="5,259,72,285"/>
<area shape="rect" title=" " alt="" coords="97,259,170,285"/>
<area shape="rect" title=" " alt="" coords="194,259,265,285"/>
<area shape="rect" title=" " alt="" coords="289,259,359,285"/>
<area shape="rect" title=" " alt="" coords="383,259,486,285"/>
<area shape="rect" title=" " alt="" coords="511,259,601,285"/>
<area shape="rect" title=" " alt="" coords="625,259,721,285"/>
<area shape="rect" title=" " alt="" coords="745,259,820,285"/>
<area shape="rect" title=" " alt="" coords="845,259,913,285"/>
<area shape="rect" title=" " alt="" coords="937,259,1021,285"/>
<area shape="rect" title=" " alt="" coords="1045,259,1152,285"/>
<area shape="rect" href="watchdog__analyzer_8h_source.html" title=" " alt="" coords="1177,259,1335,285"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a80d062157a3f0952245f7bfa28d2c0b4"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader__cpuanalyzer_8c.html#a80d062157a3f0952245f7bfa28d2c0b4">open_proc_stat_file</a> ()</td></tr>
<tr class="memdesc:a80d062157a3f0952245f7bfa28d2c0b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to open the /proc/stat file.  <a href="reader__cpuanalyzer_8c.html#a80d062157a3f0952245f7bfa28d2c0b4">More...</a><br /></td></tr>
<tr class="separator:a80d062157a3f0952245f7bfa28d2c0b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47d2d204d5ca1317ad0a497f252ef2f0"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader__cpuanalyzer_8c.html#a47d2d204d5ca1317ad0a497f252ef2f0">check_token</a> (char *token)</td></tr>
<tr class="memdesc:a47d2d204d5ca1317ad0a497f252ef2f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">unction to handle error checking for a token  <a href="reader__cpuanalyzer_8c.html#a47d2d204d5ca1317ad0a497f252ef2f0">More...</a><br /></td></tr>
<tr class="separator:a47d2d204d5ca1317ad0a497f252ef2f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8ea52a7ed66b5cb92e726c7c5590925"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader__cpuanalyzer_8c.html#ac8ea52a7ed66b5cb92e726c7c5590925">set_kernel_proc_stat_values</a> (struct <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> *stat, unsigned long values[], char *name)</td></tr>
<tr class="memdesc:ac8ea52a7ed66b5cb92e726c7c5590925"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to set values in a <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> structure.  <a href="reader__cpuanalyzer_8c.html#ac8ea52a7ed66b5cb92e726c7c5590925">More...</a><br /></td></tr>
<tr class="separator:ac8ea52a7ed66b5cb92e726c7c5590925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a168b8a9c9889ca16f57803cfaf48d611"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader__cpuanalyzer_8c.html#a168b8a9c9889ca16f57803cfaf48d611">parse_proc_line</a> (const char *line, struct <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> *stat)</td></tr>
<tr class="memdesc:a168b8a9c9889ca16f57803cfaf48d611"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to parse a line from /proc/stat and store the values in a <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> structure.  <a href="reader__cpuanalyzer_8c.html#a168b8a9c9889ca16f57803cfaf48d611">More...</a><br /></td></tr>
<tr class="separator:a168b8a9c9889ca16f57803cfaf48d611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1f8907924b121952984d7ef8278062"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader__cpuanalyzer_8c.html#a0d1f8907924b121952984d7ef8278062">get_proc_stat</a> (struct <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> *stats)</td></tr>
<tr class="memdesc:a0d1f8907924b121952984d7ef8278062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to read CPU statistics from /proc/stat file.  <a href="reader__cpuanalyzer_8c.html#a0d1f8907924b121952984d7ef8278062">More...</a><br /></td></tr>
<tr class="separator:a0d1f8907924b121952984d7ef8278062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadd47a41b4e3542328bd9993ba3ffa29"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader__cpuanalyzer_8c.html#aadd47a41b4e3542328bd9993ba3ffa29">read_proc_stat_thread</a> (void *seq)</td></tr>
<tr class="memdesc:aadd47a41b4e3542328bd9993ba3ffa29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reader thread function to read CPU statistics from /proc/stat file.  <a href="reader__cpuanalyzer_8c.html#aadd47a41b4e3542328bd9993ba3ffa29">More...</a><br /></td></tr>
<tr class="separator:aadd47a41b4e3542328bd9993ba3ffa29"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a47d2d204d5ca1317ad0a497f252ef2f0" name="a47d2d204d5ca1317ad0a497f252ef2f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47d2d204d5ca1317ad0a497f252ef2f0">&#9670;&nbsp;</a></span>check_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * check_token </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>token</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>unction to handle error checking for a token </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td>The token to check</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The input token if it is not NULL, otherwise NULL This function checks if the input token is NULL. If the token is NULL, a "Parsing error" message is printed, and NULL is returned. Otherwise, the input token is returned. </dd></dl>

</div>
</div>
<a id="a0d1f8907924b121952984d7ef8278062" name="a0d1f8907924b121952984d7ef8278062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d1f8907924b121952984d7ef8278062">&#9670;&nbsp;</a></span>get_proc_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_proc_stat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> *&#160;</td>
          <td class="paramname"><em>stats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to read CPU statistics from /proc/stat file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stats</td><td>Pointer to the <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> array to store the read statistics</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 on success, -1 on failure</dd></dl>
<p>This function reads CPU statistics from the /proc/stat file. It opens the file using the open_proc_stat_file function and reads each line. The lines are parsed using the parse_proc_line function to extract the relevant statistics. The parsed statistics are stored in the <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> array. If any error occurs during the file reading or parsing, -1 is returned. On success, 0 is returned.</p>
<dl class="section note"><dt>Note</dt><dd>The function reads one line for each CPU thread, excluding the overall CPU statistics. </dd>
<dd>
The /proc/stat file is closed after reading. </dd></dl>

</div>
</div>
<a id="a80d062157a3f0952245f7bfa28d2c0b4" name="a80d062157a3f0952245f7bfa28d2c0b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80d062157a3f0952245f7bfa28d2c0b4">&#9670;&nbsp;</a></span>open_proc_stat_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE * open_proc_stat_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to open the /proc/stat file. </p>
<dl class="section return"><dt>Returns</dt><dd>FILE* Pointer to the opened file, or NULL if an error occurs This function opens the /proc/stat file in read mode and returns a pointer to the opened file. If the file cannot be opened, an error message is printed and NULL is returned. The caller is responsible for closing the file when no longer needed. </dd></dl>

</div>
</div>
<a id="a168b8a9c9889ca16f57803cfaf48d611" name="a168b8a9c9889ca16f57803cfaf48d611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a168b8a9c9889ca16f57803cfaf48d611">&#9670;&nbsp;</a></span>parse_proc_line()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int parse_proc_line </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> *&#160;</td>
          <td class="paramname"><em>stat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to parse a line from /proc/stat and store the values in a <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">line</td><td>The line from /proc/stat to parse </td></tr>
    <tr><td class="paramname">stat</td><td>Pointer to the <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> structure to store the parsed values </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 on success, -1 on failure</dd></dl>
<p>This function parses a line from the /proc/stat file. It uses sscanf to extract the values from the line and store them in the <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> structure. If the parsing fails or the number of parsed values is incorrect, an error message is printed, and -1 is returned. On success, 0 is returned. </p>

</div>
</div>
<a id="aadd47a41b4e3542328bd9993ba3ffa29" name="aadd47a41b4e3542328bd9993ba3ffa29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadd47a41b4e3542328bd9993ba3ffa29">&#9670;&nbsp;</a></span>read_proc_stat_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * read_proc_stat_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>seq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reader thread function to read CPU statistics from /proc/stat file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seq</td><td>The sequence</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This function runs in a separate thread and continuously reads CPU statistics from the /proc/stat file. It opens the /proc/stat file using the open_proc_stat_file function and reads each line. The lines are parsed using the parse_proc_line function to extract the relevant statistics. The parsed statistics are then stored in the <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> structure. The thread runs until a termination signal is received. The function uses the slots_empty_sem semaphore and the bufferMutex mutex to synchronize access to the array_stat buffer. After reading the statistics, the thread suspends execution for a specified amount of time using the usleep function.</p>
<dl class="section note"><dt>Note</dt><dd>The /proc/stat file is read line by line, and each line represents the statistics for a specific CPU thread. </dd>
<dd>
The function handles error checking for file opening, parsing, and file closing. </dd></dl>

</div>
</div>
<a id="ac8ea52a7ed66b5cb92e726c7c5590925" name="ac8ea52a7ed66b5cb92e726c7c5590925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ea52a7ed66b5cb92e726c7c5590925">&#9670;&nbsp;</a></span>set_kernel_proc_stat_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_kernel_proc_stat_values </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> *&#160;</td>
          <td class="paramname"><em>stat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>values</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to set values in a <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stat</td><td>Pointer to the <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> structure to set values in </td></tr>
    <tr><td class="paramname">values</td><td>Array of unsigned long values to set in the structure </td></tr>
    <tr><td class="paramname">name</td><td>string to set in the structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This function sets the values in a <a class="el" href="structkernel__proc__stat.html">kernel_proc_stat</a> structure. The name is copied into the structure using strncpy. The values are assigned to the corresponding members of the structure. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
